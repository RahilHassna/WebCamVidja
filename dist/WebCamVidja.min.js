/*! WebCamVidja - v1.0.0 - 2014-10-20\n* Copyright (c) 2014 Joshua Johanan; Licensed MIT */var wcvj=window.wcvj||{};wcvj.videoIsSupported=function(){return!!(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia)},wcvj.webglIsSupported=function(){var a=document.createElement("canvas");return!(!window.WebGLRenderingContext||!a.getContext("webgl")&&!a.getContext("experimental-webgl"))},function(a){"use strict";var b=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.oGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,c=window.webkitURL||window.mozURL||window.msURL||window.URL,d=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}();a.webcam=function(e,f){f="undefined"!=typeof f?f:{},f.canvas="undefined"!=typeof f.canvas?f.canvas:!1,f.draw="undefined"!=typeof f.draw?f.draw:!1,f.autoplay="undefined"!=typeof f.autoplay?f.autoplay:!0,f.resolution="undefined"!=typeof f.resolution?f.resolution:"default";f.glfx=void 0!==window.fx&&a.webglIsSupported()&&void 0!==typeof f.glfx?f.glfx:!1;var g,h,i,j,k,l;l=[],g=document.getElementById(e),null===g?(g=document.createElement("video"),g.id=e,g.autoplay=f.autoplay,g.innerHTML="Your browser does not support video"):g.autoplay=f.autoplay,f.glfx&&a.webglIsSupported()?h=fx.canvas():f.canvas&&(h=document.createElement("canvas"),i=h.getContext("2d"),j=h.getContext("webgl")||h.getContext("experimental-webgl"),h.innerHTML="Your browser does not support canvas");var m={"1080p":{mandatory:{minWidth:"1920",minHeight:"1080"}},UXGA:{mandatory:{minWidth:"1600",minHeight:"1200"}},"720p":{mandatory:{minWidth:"1280",minHeight:"720"}},SVGA:{mandatory:{minWidth:"800",minHeight:"600"}},VGA:{mandatory:{minWidth:"640",minHeight:"480"}},"default":!0},n="string"==typeof f.resolution?m[f.resolution]:f.resolution;void 0===n&&(n=m["default"]);var o=function(){i.drawImage(g,0,0)};f.draw||(f.draw=o);var p=function(){if(f.glfx){k.loadContentsOf(g),h.draw(k);for(var a=0;a<l.length;a++)h[l[a][0]].apply(h,l[a][1]);h.update()}else f.draw.apply(h,[i,j,g]);d(p)},q=function(a){f.canvas&&(f.draw=a,i.save(),i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,h.width,h.height),i.restore())},r=function(a){l=a},s=function(){f.glfx&&h.update()},t=function(){(f.canvas||f.glfx)&&(h.width=g.videoWidth,h.height=g.videoHeight),setTimeout(function(){f.glfx&&(k=h.texture(g),p())},500),f.canvas&&p()},u=function(){null!==g.src&&(g.pause(),g.src="",v.stop())};g.addEventListener("canplay",t,!1);var v;return b.call(navigator,{video:n,audio:!1},function(a){v=a,void 0!==g.mozSrcObject?g.mozSrcObject=v:g.src=navigator.mozGetUserMedia?v:c?c.createObjectURL(v):v},function(a){var b=document.createEvent("Event");b.initEvent("UserMediaError",!0,!0),b.UserMediaError=a,g.dispatchEvent(b)}),{video:g,canvas:h,setDraw:q,setFilter:r,update:s,killStream:u}}}(window.wcvj);